{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteConfirmPopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","index.js","images/header-logo.svg"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","type","onClick","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","key","Footer","PopupWithForm","isOpen","onClose","title","children","onSubmit","onMouseUp","event","target","currentTarget","action","noValidate","EditProfilePopup","onUpdateUser","isLoading","useState","setName","description","setDescription","useEffect","preventDefault","value","onChange","placeholder","minLength","maxLength","pattern","required","EditAvatarPopup","onUpdateAvatar","avatarInputRef","useRef","current","ref","AddPlacePopup","nameInputRef","linkInputRef","DeleteConfirmPopup","ImagePopup","api","baseUrl","headers","this","fetch","then","res","ok","json","Promise","reject","status","item","console","log","method","body","JSON","stringify","newCard","id","authorization","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isDeletePopupOpen","setDeletePopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","getUserAndCards","a","all","getUserInfo","getCards","userInfo","closeAllPopups","handleEscapeClose","document","addEventListener","removeEventListener","Provider","dislikeCard","likeCard","newCards","c","catch","err","setUserInfo","userData","finally","inputValue","createCard","setAvatar","deleteCard","deleteCards","filter","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.5828f9e9.chunk.js","sourcesContent":["import React from \"react\";\r\nimport logo from '../images/header-logo.svg';\r\n\r\nfunction Header() {\r\n    return (\r\n        <header className=\"header\">\r\n            <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nconst Card = ({ card, onCardClick, onCardLike, onCardDelete }) => {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = card.owner._id === currentUser._id; // Определяем, являемся ли мы владельцем текущей карточки\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    const handleLikeClick = () => {\r\n        onCardLike(card);\r\n    }\r\n\r\n    const handleDeleteClick = () => {\r\n        onCardDelete(card);\r\n    }\r\n\r\n    const handleClick = () => {\r\n        onCardClick(card);\r\n    }\r\n\r\n    return (\r\n        <li className=\"card\">\r\n            <button className={`${isOwn ? `card__remove-button card__remove-button_show` : `card__remove-button`}`}\r\n                type=\"button\" onClick={handleDeleteClick} />\r\n            <img className=\"card__image\" src={card.link} alt={card.name} onClick={handleClick} />\r\n            <div className=\"card__description\">\r\n                <p className=\"card__name\">{card.name}</p>\r\n                <div className=\"card__like-cover\">\r\n                    <button className={`${isLiked ? `card__like card__like_active` : `card__like`}`}\r\n                        type=\"button\" onClick={handleLikeClick} />\r\n                    <span className=\"card__like-counter\">{card.likes.length}</span>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Main = ({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, onCardLike, onCardDelete, cards }) => {\r\n    const currentUser = React.useContext(CurrentUserContext); // получаем значение контекста\r\n\r\n    return (\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__avatar-button\" onClick={onEditAvatar}>\r\n                    <img className=\"profile__avatar\" src={currentUser.avatar} alt='' />\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                    <button className=\"profile__button-edit\" type=\"button\" onClick={onEditProfile} />\r\n                    <p className=\"profile__profession\">{currentUser.about}</p>\r\n                </div>\r\n                <button className=\"profile__button-add\" type=\"button\" onClick={onAddPlace} />\r\n            </section>\r\n            <section className=\"elements\">\r\n                <ul className=\"elements__list\">\r\n                    {cards.map((card) => <Card key={card._id} onCardClick={onCardClick} card={card}\r\n                        onCardLike={onCardLike} onCardDelete={onCardDelete} />)}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from \"react\";\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from \"react\";\r\n\r\nfunction PopupWithForm({ name, isOpen, onClose, title, children, onSubmit }) {\r\n    const handleOverlayClose = (event) => {\r\n        if (event.target === event.currentTarget && isOpen) {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section className={`${isOpen ? `popup popup_type_${name} popup_opened` : `popup popup_type_${name}`}`}\r\n            onMouseUp={handleOverlayClose}>\r\n            <div className=\"popup__container\">\r\n                <button className=\"popup__close\" type=\"button\" onClick={onClose} />\r\n                <h2 className=\"popup__title\">{title}</h2>\r\n                <form className={`popup__container_type_${name}`} action=\"#\" name={`${name}`} onSubmit={onSubmit} noValidate>\r\n                    {children}\r\n                </form>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser, isLoading }) => {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n\r\n    const handleInputNameChange = (event) => {\r\n        setName(event.target.value);\r\n    };\r\n\r\n    const handleInputAboutChange = (event) => {\r\n        setDescription(event.target.value);\r\n    };\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onUpdateUser({\r\n            name,\r\n            about: description,\r\n        });\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name || '');\r\n        setDescription(currentUser.about || '');\r\n    }, [currentUser]);\r\n\r\n    return (\r\n        <PopupWithForm title={'Редактировать профиль'} name={'redact'} isOpen={isOpen} onClose={onClose}\r\n            onSubmit={handleSubmit}>\r\n                <label className=\"popup__control\">\r\n                    <input className=\"popup__input popup__input_type_name\" type=\"text\" name=\"name\" value={name}\r\n                        onChange={handleInputNameChange} placeholder=\"Имя\" minLength=\"2\" maxLength=\"20\"\r\n                        pattern=\"^[A-Za-zА-Яа-яЁё\\s\\D]+$\" required />\r\n                    <span className=\"popup__error\" />\r\n                </label>\r\n                <label className=\"popup__control\">\r\n                    <input className=\"popup__input popup__input_type_job\" type=\"text\" name=\"about\" value={description}\r\n                        onChange={handleInputAboutChange} placeholder=\"Занятие\" minLength=\"2\" maxLength=\"200\"\r\n                        pattern=\"^[A-Za-zА-Яа-яЁё\\s\\D]+$\" required />\r\n                    <span className=\"popup__error\" />\r\n                </label>\r\n            <input className=\"popup__button popup__button_type_save\" type=\"submit\" value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\r\n                name=\"submit\" />\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\n\r\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar, isLoading }) => {\r\n    const avatarInputRef = React.useRef(null);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onUpdateAvatar({\r\n            avatar: avatarInputRef.current.value,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm title={'Обновить аватар'} name={'avatar'} isOpen={isOpen} onClose={onClose}\r\n            onSubmit={handleSubmit}>\r\n            <div className=\"popup_type_avatar\">\r\n                <label className=\"popup__control\">\r\n                    <input ref={avatarInputRef}\r\n                        className={\"popup__input popup__input_type_avatar\"}\r\n                        type=\"url\"\r\n                        name=\"avatar\"\r\n                        placeholder=\"Ссылка на картинку\"\r\n                        required />\r\n                    <span className={\"popup__error\"} />\r\n                </label>\r\n            </div>\r\n            <input\r\n                className={\"popup__button popup__button_type_save\"}\r\n                type=\"submit\"\r\n                value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\r\n                name=\"submit\" />\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst AddPlacePopup = ({ isOpen, onClose, onAddPlace, isLoading }) => {\r\n    const nameInputRef = React.useRef(null);\r\n    const linkInputRef = React.useRef(null);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onAddPlace({\r\n            name: nameInputRef.current.value,\r\n            link: linkInputRef.current.value\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm title={'Новое место'} name={'add'} isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n            <label className=\"popup__control\">\r\n                <input ref={nameInputRef} className=\"popup__input popup__input_type_name\" type=\"text\" name=\"name\"\r\n                    placeholder=\"Название\" minLength=\"1\" maxLength=\"30\"\r\n                    pattern=\"^[A-Za-zА-Яа-яЁё\\s\\D]+$\" required />\r\n                <span className=\"popup__error\" />\r\n            </label>\r\n            <label className=\"popup__control\">\r\n                <input ref={linkInputRef} className=\"popup__input popup__input_type_job\" type=\"url\" name=\"link\"\r\n                    placeholder=\"Ссылка на картинку\" required />\r\n                <span className=\"popup__error\" />\r\n            </label>\r\n            <input className=\"popup__button popup__button_type_save\" type=\"submit\" value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\r\n                name=\"submit\" />\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst DeleteConfirmPopup = ({card, onClose, isOpen, onCardDelete, isLoading}) => {\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onCardDelete(card);\r\n    };\r\n\r\n    return (\r\n        <PopupWithForm title={'Вы уверены?'} name={'prevent'} isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n            <input className=\"popup__button\" type=\"submit\" name=\"submit\" value={`${isLoading ? `Удаление...` : `Да`}`}/>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default DeleteConfirmPopup;","import React from \"react\";\r\n\r\nconst ImagePopup = ({ card, isOpen, onClose }) => {\r\n    const handleOverlayClose = (event) => {\r\n        if (event.target === event.currentTarget) {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section className={`${isOpen ? `popup popup_type_img popup_opened` : `popup popup_type_img`}`}\r\n            onMouseUp={handleOverlayClose}>\r\n            <div className=\"popup__img-container\">\r\n                <button className=\"popup__close\" type=\"button\" onClick={onClose} />\r\n                <figure className=\"popup__figure\">\r\n                    <img className=\"popup__image\" src={card?.link} alt=\"\" />\r\n                    <figcaption className=\"popup__caption\">{card?.name}</figcaption>\r\n                </figure>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","class Api {\r\n    constructor({ baseUrl, headers }) {\r\n        //тело конструктора\r\n        this.baseUrl = baseUrl;\r\n        this.headers = headers;\r\n    }\r\n\r\n    // обработка ответа с сервера\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this.baseUrl}users/me`, {\r\n            headers: this.headers,\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    getCards() {\r\n        return fetch(`${this.baseUrl}cards`, {\r\n            headers: this.headers,\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    setUserInfo(item) {\r\n        console.log(item);\r\n        return fetch(`${this.baseUrl}users/me`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: item.name,\r\n                about: item.about\r\n            })\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    createCard(newCard) {\r\n        return fetch(`${this.baseUrl}cards`, {\r\n            method: 'POST',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: newCard.name,\r\n                link: newCard.link,\r\n            })\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    deleteCard(id) {\r\n        return fetch(`${this.baseUrl}cards/${id}`, {\r\n            method: 'DELETE',\r\n            headers: this.headers,\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    likeCard(id) {\r\n        return fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n            method: 'PUT',\r\n            headers: this.headers,\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    dislikeCard(id) {\r\n        return fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n            method: 'DELETE',\r\n            headers: this.headers,\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    setAvatar(avatar) {\r\n        return fetch(`${this.baseUrl}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify(avatar),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14/',\r\n    headers: {\r\n        authorization: 'ccd33dbf-109f-4270-9c16-faebaa7150cb',\r\n        'Content-Type': 'application/json',\r\n    }\r\n});\r\n\r\nexport default api;","import React from 'react';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport DeleteConfirmPopup from \"./DeleteConfirmPopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nconst App = () => {\n    const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n    const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n    const [isDeletePopupOpen, setDeletePopupOpen] = React.useState(false);\n    const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState(null);\n    const [currentUser, setCurrentUser] = React.useState([]);\n    const [cards, setCards] = React.useState([]);\n    const [isLoading, setIsLoading] = React.useState(false);\n\n\n    const handleCardLike = (card) => {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        const promise = isLiked ? api.dislikeCard(card._id) : api.likeCard(card._id);\n        promise\n            .then((newCard) => {\n                const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n                setCards(newCards);\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            });\n    };\n\n    const handleCardDelete = (card) => {\n        setIsLoading(true)\n        api.deleteCard(card._id)\n            .then(() => {\n                const deleteCards = cards.filter((c) => c._id !== card._id);\n                setCards(deleteCards);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false)\n            })\n    };\n\n    const getUserAndCards = async () => {\n        try {\n            const [userInfo, cards] = await Promise.all([api.getUserInfo(), api.getCards()]);\n            setCards(cards);\n            setCurrentUser(userInfo);\n        } catch (err) {\n            console.log(`${err}`);\n        }\n    };\n\n    React.useEffect(() => {\n        getUserAndCards();\n    }, [])\n\n\n    const handleEditAvatarClick = () => {\n        setEditAvatarPopupOpen(true);\n    }\n\n    const handleEditProfileClick = () => {\n        setEditProfilePopupOpen(true);\n    }\n\n    const handleAddPlaceClick = () => {\n        setAddPlacePopupOpen(true);\n    }\n\n    const handleDeletePopupOpenClick = (card) => {\n        setDeletePopupOpen(true);\n        setSelectedCard(card);\n    };\n\n    const handleCardClick = (card) => {\n        setImagePopupOpen(true);\n        setSelectedCard(card);\n    }\n\n    const closeAllPopups = () => {\n        setEditAvatarPopupOpen(false);\n        setEditProfilePopupOpen(false);\n        setAddPlacePopupOpen(false);\n        setDeletePopupOpen(false);\n        setSelectedCard(null);\n        setImagePopupOpen(false);\n    };\n\n    const handleUpdateUser = (userInfo) => {\n        setIsLoading(true)\n        api.setUserInfo(userInfo)\n            .then((userData) => {\n                setCurrentUser(userData);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false)\n            })\n\n    };\n\n    const handleUpdateAvatar = (inputValue) => {\n        setIsLoading(true)\n        api.setAvatar(inputValue)\n            .then((avatar) => {\n                setCurrentUser(avatar);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false)\n            })\n    };\n\n    const handleEscapeClose = (event) => {\n        if (event.key === 'Escape') {\n            closeAllPopups()\n        }\n    };\n\n    React.useEffect(() => {\n        document.addEventListener(\"keydown\", handleEscapeClose, false);\n\n        return () => {\n            document.removeEventListener(\"keydown\", handleEscapeClose, false);\n        };\n    });\n\n\n    const handleAddPlaceSubmit = (inputValue) => {\n        setIsLoading(true)\n        api.createCard(inputValue)\n            .then((newCard) => {\n                setCards([...cards, newCard]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false)\n            })\n    };\n\n    return (\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header />\n                <Main\n                    onEditAvatar={handleEditAvatarClick}\n                    onEditProfile={handleEditProfileClick}\n                    onAddPlace={handleAddPlaceClick}\n                    onCardClick={handleCardClick}\n                    onCardLike={handleCardLike}\n                    onCardDelete={handleDeletePopupOpenClick}\n                    cards={cards} />\n                <Footer />\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups}\n                    onUpdateUser={handleUpdateUser} isLoading={isLoading} />\n\n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups}\n                    onAddPlace={handleAddPlaceSubmit} isLoading={isLoading} />\n\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups}\n                    onUpdateAvatar={handleUpdateAvatar} isLoading={isLoading} />\n\n                <DeleteConfirmPopup isOpen={isDeletePopupOpen} onClose={closeAllPopups}\n                    card={selectedCard} onCardDelete={handleCardDelete} isLoading={isLoading} />\n\n                <ImagePopup isOpen={isImagePopupOpen} onClose={closeAllPopups} card={selectedCard} />\n            </CurrentUserContext.Provider>\n        </div>\n    );\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/header-logo.855a8c98.svg\";"],"sourceRoot":""}